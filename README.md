# ğŸ“ˆ Stock Dashboard v4

å€‹äººæŠ•è³‡çµ„åˆç®¡ç†å„€è¡¨æ¿ï¼Œæ”¯æ´å°è‚¡ + ç¾è‚¡å³æ™‚è¿½è¹¤ã€‚

## âœ¨ åŠŸèƒ½

- **æŒè‚¡ç®¡ç†** â€” æ–°å¢ / ç·¨è¼¯ / åˆªé™¤æŒè‚¡ï¼ŒExcel æ‰¹æ¬¡åŒ¯å…¥
- **å³æ™‚è‚¡åƒ¹** â€” é€é yfinance å–å¾—å³æ™‚å ±åƒ¹ã€æŠ€è¡“æŒ‡æ¨™ (RSI, Beta, MA50, MA200)
- **è§€å¯Ÿæ¸…å–®** â€” è¿½è¹¤æ„Ÿèˆˆè¶£çš„è‚¡ç¥¨
- **åƒ¹æ ¼è­¦å ±** â€” è¨­å®šåƒ¹æ ¼åˆ°é”é€šçŸ¥
- **ç§»å‹•åœæ** â€” è‡ªå‹•è¿½è¹¤æœ€é«˜åƒ¹ï¼Œè¨­å®šåœæç™¾åˆ†æ¯”
- **è³‡é‡‘æµæ°´** â€” è¨˜éŒ„å­˜å…¥ / æå‡ºï¼Œè¨ˆç®—æŠ•å…¥æˆæœ¬
- **å¤šå¹£åˆ¥** â€” å°å¹£ / ç¾é‡‘æŒè‚¡åˆ†é–‹è¨ˆç®—
- **è¿·ä½ èµ°å‹¢åœ–** â€” 60 æ—¥æ”¶ç›¤åƒ¹ Sparkline
- **æ·±è‰²æ¨¡å¼** â€” æ·ºè‰² / æ·±è‰²ä¸»é¡Œåˆ‡æ›
- **ä¸­è‹±æ–‡åˆ‡æ›** â€” å®Œæ•´ i18n æ”¯æ´
- **è¨‚é–±ç³»çµ±** â€” ä¸‰ç´šæ–¹æ¡ˆæ¶æ§‹ (Free / Pro / Premium)ï¼ŒåˆæœŸå…è²»é–‹æ”¾

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React + TypeScript     â”‚  â† å‰ç«¯ (Vite + Tailwind + shadcn/ui)
â”‚  tRPC Client            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ tRPC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Express + tRPC Server  â”‚  â† å¾Œç«¯ (Node.js)
â”‚  Drizzle ORM            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Python Flask           â”‚  â† è‚¡åƒ¹å¾®æœå‹™ (yfinance)
â”‚  yfinance + pandas      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MySQL 8.0              â”‚  â† è³‡æ–™åº«
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å¿…è¦æ¢ä»¶

- Node.js â‰¥ 18
- pnpm â‰¥ 10
- Python â‰¥ 3.10
- MySQL â‰¥ 8.0ï¼ˆæˆ– Dockerï¼‰

### ä¸€éµå®‰è£

```bash
git clone https://github.com/w08130220-a11y/stockdashborad.git
cd stockdashborad
chmod +x setup-local.sh
./setup-local.sh
```

è…³æœ¬æœƒè‡ªå‹•ï¼šå®‰è£ Node/Python ä¾è³´ã€å»ºç«‹ `.env`ã€è¨­å®š MySQLã€åŸ·è¡Œ DB migrationã€‚

### å•Ÿå‹•ï¼ˆå…©å€‹çµ‚ç«¯æ©Ÿï¼‰

```bash
# çµ‚ç«¯æ©Ÿ 1 â€” è‚¡åƒ¹æœå‹™
source venv/bin/activate
python3 server/yfinance_service.py

# çµ‚ç«¯æ©Ÿ 2 â€” Web æœå‹™
pnpm dev
```

ç€è¦½å™¨æ‰“é–‹ **http://localhost:3000**

> è‡ªå‹•ç™»å…¥ç®¡ç†å“¡å¸³è™Ÿï¼Œä¸éœ€è¦è¼¸å…¥å¸³å¯†ã€‚

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
â”œâ”€â”€ client/src/           # React å‰ç«¯
â”‚   â”œâ”€â”€ pages/Home.tsx    # ä¸»é é¢ï¼ˆæŒè‚¡/è§€å¯Ÿ/åœæ/è³‡é‡‘æµæ°´ï¼‰
â”‚   â”œâ”€â”€ components/       # UI å…ƒä»¶ (Paywall, Sparkline, etc.)
â”‚   â”œâ”€â”€ contexts/         # Theme, I18n, Subscription providers
â”‚   â””â”€â”€ lib/              # trpc client, i18n, stockUtils
â”œâ”€â”€ server/               # Express + tRPC å¾Œç«¯
â”‚   â”œâ”€â”€ _core/            # æ ¸å¿ƒæ¡†æ¶ (context, auth, env, vite)
â”‚   â”œâ”€â”€ routers.ts        # tRPC API è·¯ç”±
â”‚   â”œâ”€â”€ stockService.ts   # è‚¡åƒ¹æœå‹™ (â†’ Python yfinance)
â”‚   â”œâ”€â”€ scheduler.ts      # æ¯æ—¥å®šæ™‚æ›´æ–°
â”‚   â”œâ”€â”€ subscriptionRouter.ts
â”‚   â”œâ”€â”€ webhooks.ts       # Stripe/Apple/Google webhook é ç•™
â”‚   â”œâ”€â”€ db.ts             # Drizzle ORM è³‡æ–™åº«æ“ä½œ
â”‚   â””â”€â”€ yfinance_service.py  # Python è‚¡åƒ¹å¾®æœå‹™
â”œâ”€â”€ shared/               # å‰å¾Œç«¯å…±ç”¨å‹åˆ¥
â”‚   â”œâ”€â”€ plans.ts          # è¨‚é–±æ–¹æ¡ˆå®šç¾© + LAUNCH_MODE
â”‚   â””â”€â”€ const.ts
â”œâ”€â”€ drizzle/              # DB schema + migration SQL
â”‚   â””â”€â”€ schema.ts
â””â”€â”€ setup-local.sh        # ä¸€éµå®‰è£è…³æœ¬
```

## ğŸ’ è¨‚é–±ç³»çµ±

| æ–¹æ¡ˆ | åƒ¹æ ¼ | æŒè‚¡ä¸Šé™ | è§€å¯Ÿæ¸…å–® | åƒ¹æ ¼è­¦å ± | ç‰¹è‰²åŠŸèƒ½ |
|------|------|----------|----------|----------|----------|
| Free | $0 | 5 | 3 | 1 | åŸºæœ¬è¿½è¹¤ |
| Pro | $9.99/æœˆ | 30 | 20 | 10 | ç§»å‹•åœæã€Excel åŒ¯å…¥ã€å¤šå¹£åˆ¥ |
| Premium | $19.99/æœˆ | âˆ | âˆ | âˆ | AI åˆ†æã€PDF åŒ¯å‡ºã€å„ªå…ˆæ”¯æ´ |

> ç›®å‰ `LAUNCH_MODE = true`ï¼Œæ‰€æœ‰äººå…è²»äº«æœ‰ Pro åŠŸèƒ½ã€‚

## âš™ï¸ ç’°å¢ƒè®Šæ•¸

```env
DATABASE_URL=mysql://user:pass@localhost:3306/stock_dashboard
JWT_SECRET=your-secret-key
YFINANCE_API_URL=http://localhost:5001
OWNER_OPEN_ID=local-owner
```

## ğŸ“ License

MIT
